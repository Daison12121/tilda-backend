# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¢–∏–ª—å–¥—ã

## ‚ö° –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å

### 1. –ü–æ–ª—É—á–∏—Ç–µ URL –≤–∞—à–µ–≥–æ Railway –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ó–∞–π–¥–∏—Ç–µ –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –Ω–∞ Railway
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://your-app-name.railway.app`)

### 2. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

**–í —Ñ–∞–π–ª–µ `tilda-script.js` (—Å—Ç—Ä–æ–∫–∞ 6):**
```javascript
const BACKEND_URL = 'https://your-railway-app.railway.app'; // –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –í–ê–® URL
```

**–í —Ñ–∞–π–ª–µ `user-profile.html` (—Å—Ç—Ä–æ–∫–∞ 67):**
```javascript
const BACKEND_URL = 'https://your-railway-app.railway.app'; // –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –í–ê–® URL
```

### 3. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥ –Ω–∞ Railway

```bash
git add .
git commit -m "Add solutions for Tilda document.write issue"
git push
```

### 4. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ—à–µ–Ω–∏–µ

## üéØ –†–µ—à–µ–Ω–∏–µ 1: –£—Å—Ç–æ–π—á–∏–≤—ã–π JavaScript (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `tilda-script.js`
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –∫–æ–¥
3. –í –¢–∏–ª—å–¥–µ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
4. –î–æ–±–∞–≤—å—Ç–µ –±–ª–æ–∫ "HTML-–∫–æ–¥"
5. –í—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
6. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –æ–ø—É–±–ª–∏–∫—É–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä—è–º–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¢–∏–ª—å–¥—ã
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ document.write()
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö iframe

## üéØ –†–µ—à–µ–Ω–∏–µ 2: –û—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–¥ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ Railway
2. –í –¢–∏–ª—å–¥–µ –¥–æ–±–∞–≤—å—Ç–µ –±–ª–æ–∫ "HTML-–∫–æ–¥"
3. –í—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥:

```html
<div id="profile-container" style="width: 100%; min-height: 600px;">
    <div style="text-align: center; padding: 40px;">
        <div style="border: 3px solid #f3f3f3; border-top: 3px solid #667eea; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è...</p>
    </div>
</div>

<style>
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
</style>

<script>
(function() {
    const BACKEND_URL = 'https://your-railway-app.railway.app'; // –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –í–ê–® URL
    
    function getUserEmail() {
        // –°–ø–æ—Å–æ–±—ã –ø–æ–ª—É—á–µ–Ω–∏—è email –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        return localStorage.getItem('tilda_user_email') || 
               localStorage.getItem('user_email') ||
               sessionStorage.getItem('tilda_user_email') ||
               'test@example.com'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É
    }
    
    function loadProfile() {
        const email = getUserEmail();
        const container = document.getElementById('profile-container');
        
        if (email && container) {
            const iframe = document.createElement('iframe');
            iframe.src = `${BACKEND_URL}/profile?email=${encodeURIComponent(email)}`;
            iframe.style.cssText = 'width: 100%; height: 600px; border: none; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);';
            
            container.innerHTML = '';
            container.appendChild(iframe);
        }
    }
    
    // –ó–∞–ø—É—Å–∫ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    setTimeout(loadProfile, 1000);
    
    // –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
    let attempts = 0;
    const interval = setInterval(() => {
        attempts++;
        if (attempts > 5) {
            clearInterval(interval);
            return;
        }
        
        const email = getUserEmail();
        if (email !== 'test@example.com') {
            loadProfile();
            clearInterval(interval);
        }
    }, 2000);
})();
</script>
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
npm start

# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
http://localhost:3000/profile?email=test@example.com
```

### –ù–∞ Railway:
```
https://your-railway-app.railway.app/profile?email=test@example.com
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–í –æ–±–æ–∏—Ö —Ä–µ—à–µ–Ω–∏—è—Ö –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `getUserEmail()`. –í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò–∑ localStorage
```javascript
function getUserEmail() {
    return localStorage.getItem('user_email') || 
           localStorage.getItem('tilda_user_email');
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò–∑ cookies
```javascript
function getUserEmail() {
    const cookies = document.cookie.split(';');
    for (let cookie of cookies) {
        const [name, value] = cookie.trim().split('=');
        if (name === 'user_email') {
            return decodeURIComponent(value);
        }
    }
    return null;
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¢–∏–ª—å–¥—ã
```javascript
function getUserEmail() {
    return window.tildaForm?.userEmail || 
           window.currentUser?.email;
}
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ª–∏ —Å–∫—Ä–∏–ø—Ç:**
   ```javascript
   console.log('–°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–µ–Ω');
   ```

2. **–ù–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ email:**
   ```javascript
   console.log('Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', getUserEmail());
   ```

3. **–†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ API:**
   ```javascript
   fetch('https://your-railway-app.railway.app/health')
       .then(r => r.json())
       .then(console.log);
   ```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Railway –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å URL –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è email –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ