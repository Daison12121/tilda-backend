<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –ø–æ–∏—Å–∫–∞ Collabza SDK</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .log-output {
            background: #1e1e1e;
            color: #00ff00;
            padding: 20px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 600px;
            overflow-y: auto;
            margin-top: 20px;
        }
        button {
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            margin: 10px;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,123,255,0.3);
        }
        .found {
            color: #ffff00 !important;
            font-weight: bold;
        }
        .error {
            color: #ff6b6b !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç –ü–æ–∏—Å–∫ Collabza SDK –∏ —Å–∏—Å—Ç–µ–º—ã —Å–µ—Å—Å–∏–π</h1>
        <p>–≠—Ç–æ—Ç —Ç–µ—Å—Ç –ø–æ–º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ SDK Collabza –∏ —Ç–æ–∫–µ–Ω—ã —Å–µ—Å—Å–∏–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.</p>
        
        <button onclick="runCollabzaSearch()">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫ Collabza SDK</button>
        <button onclick="clearLogs()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏</button>
        
        <div id="logOutput" class="log-output"></div>
    </div>

    <script>
        // –ò–º–∏—Ç–∏—Ä—É–µ–º –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        localStorage.setItem('tilda_user_data', '{"id":"6ebc01e5-90be-4ebf-b680-9b385bd58c3b","email":"barbarosgroup2024@gmail.com","name":"barbarosgroup2022","created_at":"2025-08-19T01:45:46.025237+00:00","auth_uid":null,"referral_code":"0649ABAR","referred_by":null,"balance_kgs":0,"total_earned":100,"level_1_referrals":1,"level_2_referrals":0,"level_3_referrals":0}');
        localStorage.setItem('tilda_user_email', '"barbarosgroup2024@gmail.com"');
        document.cookie = "userEmail=barbarosgroup2024@gmail.com; path=/";
        document.cookie = "tilda_user_email=barbarosgroup2024@gmail.com; path=/";

        function log(message, data = '') {
            const logOutput = document.getElementById('logOutput');
            const timestamp = new Date().toLocaleTimeString();
            let logClass = '';
            
            if (message.includes('–ù–ê–ô–î–ï–ù EMAIL') || message.includes('–ù–ê–ô–î–ï–ù SDK')) {
                logClass = 'found';
            } else if (message.includes('–û—à–∏–±–∫–∞') || message.includes('ERROR')) {
                logClass = 'error';
            }
            
            const logEntry = document.createElement('div');
            logEntry.className = logClass;
            logEntry.innerHTML = `[${timestamp}] ${message}${data ? ' ' + JSON.stringify(data, null, 2) : ''}`;
            logOutput.appendChild(logEntry);
            logOutput.scrollTop = logOutput.scrollHeight;
        }

        function clearLogs() {
            document.getElementById('logOutput').innerHTML = '';
        }

        // üîç –ü–û–ò–°–ö COLLABZA SDK –ò –¢–û–ö–ï–ù–û–í
        function getTildaUserEmail() {
            log('=== –ü–û–ò–°–ö COLLABZA SDK –ò –°–ò–°–¢–ï–ú–´ –°–ï–°–°–ò–ô ===');
            
            // 1. –ü–û–ò–°–ö COLLABZA SDK –í –ì–õ–û–ë–ê–õ–¨–ù–´–• –ü–ï–†–ï–ú–ï–ù–ù–´–•
            log('=== –ü–û–ò–°–ö COLLABZA/–í–ù–ï–®–ù–ò–• SDK ===');
            const possibleSDKs = [
                'Collabza', 'collabza', 'COLLABZA',
                'CollabzaSDK', 'collabzaSDK', 'collabza_sdk',
                'CZ', 'cz', 'czSDK',
                'UserSDK', 'userSDK', 'user_sdk',
                'AuthSDK', 'authSDK', 'auth_sdk',
                'SessionSDK', 'sessionSDK', 'session_sdk'
            ];
            
            possibleSDKs.forEach(sdkName => {
                if (window[sdkName]) {
                    log(`–ù–ê–ô–î–ï–ù SDK: window.${sdkName}`, window[sdkName]);
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–µ—Ç–æ–¥—ã SDK
                    if (typeof window[sdkName] === 'object') {
                        const methods = Object.keys(window[sdkName]);
                        log(`–ú–µ—Ç–æ–¥—ã ${sdkName}:`, methods);
                        
                        // –ò—â–µ–º –º–µ—Ç–æ–¥—ã –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                        const userMethods = methods.filter(method => 
                            method.toLowerCase().includes('user') || 
                            method.toLowerCase().includes('email') ||
                            method.toLowerCase().includes('current') ||
                            method.toLowerCase().includes('session') ||
                            method.toLowerCase().includes('auth')
                        );
                        
                        if (userMethods.length > 0) {
                            log(`–ù–∞–π–¥–µ–Ω—ã –º–µ—Ç–æ–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ ${sdkName}:`, userMethods);
                            
                            userMethods.forEach(method => {
                                try {
                                    if (typeof window[sdkName][method] === 'function') {
                                        const result = window[sdkName][method]();
                                        log(`${sdkName}.${method}():`, result);
                                        if (result && result.email) {
                                            log(`–ù–ê–ô–î–ï–ù EMAIL —á–µ—Ä–µ–∑ ${sdkName}.${method}(): ${result.email}`);
                                        }
                                    } else {
                                        log(`${sdkName}.${method}:`, window[sdkName][method]);
                                        if (window[sdkName][method] && window[sdkName][method].email) {
                                            log(`–ù–ê–ô–î–ï–ù EMAIL –≤ ${sdkName}.${method}: ${window[sdkName][method].email}`);
                                        }
                                    }
                                } catch (error) {
                                    log(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ ${sdkName}.${method}:`, error);
                                }
                            });
                        }
                    }
                }
            });
            
            // 2. –ü–û–ò–°–ö –í–°–ï–• –ì–õ–û–ë–ê–õ–¨–ù–´–• –ü–ï–†–ï–ú–ï–ù–ù–´–• –° –î–ê–ù–ù–´–ú–ò –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
            log('=== –ü–û–ò–°–ö –í–°–ï–• –ì–õ–û–ë–ê–õ–¨–ù–´–• –ü–ï–†–ï–ú–ï–ù–ù–´–• ===');
            const allWindowKeys = Object.keys(window);
            const userRelatedKeys = allWindowKeys.filter(key => 
                key.toLowerCase().includes('user') ||
                key.toLowerCase().includes('auth') ||
                key.toLowerCase().includes('session') ||
                key.toLowerCase().includes('token') ||
                key.toLowerCase().includes('email') ||
                key.toLowerCase().includes('current') ||
                key.toLowerCase().includes('member') ||
                key.toLowerCase().includes('profile') ||
                key.toLowerCase().includes('account')
            );
            
            log('–ù–∞–π–¥–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º:', userRelatedKeys);
            
            userRelatedKeys.forEach(key => {
                try {
                    const value = window[key];
                    log(`window.${key}:`, value);
                    
                    if (value && typeof value === 'object') {
                        if (value.email) {
                            log(`–ù–ê–ô–î–ï–ù EMAIL –≤ window.${key}: ${value.email}`);
                        }
                        
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
                        Object.keys(value).forEach(subKey => {
                            if (subKey.toLowerCase().includes('email') || 
                                subKey.toLowerCase().includes('user') ||
                                subKey.toLowerCase().includes('current')) {
                                log(`  ${key}.${subKey}:`, value[subKey]);
                                if (value[subKey] && value[subKey].email) {
                                    log(`–ù–ê–ô–î–ï–ù EMAIL –≤ window.${key}.${subKey}: ${value[subKey].email}`);
                                }
                            }
                        });
                    }
                } catch (error) {
                    log(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ window.${key}:`, error);
                }
            });
            
            // 3. –ü–û–ò–°–ö –¢–û–ö–ï–ù–û–í –ò –°–ï–°–°–ò–ô –í STORAGE
            log('=== –ü–û–ò–°–ö –¢–û–ö–ï–ù–û–í COLLABZA –í STORAGE ===');
            
            // localStorage
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key.toLowerCase().includes('collabza') ||
                    key.toLowerCase().includes('token') ||
                    key.toLowerCase().includes('session') ||
                    key.toLowerCase().includes('auth') ||
                    key.toLowerCase().includes('jwt') ||
                    key.toLowerCase().includes('access') ||
                    key.toLowerCase().includes('bearer')) {
                    
                    const value = localStorage.getItem(key);
                    log(`localStorage ${key}:`, value);
                    
                    try {
                        const parsed = JSON.parse(value);
                        log(`–ü–∞—Ä—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ${key}:`, parsed);
                        if (parsed.email) {
                            log(`–ù–ê–ô–î–ï–ù EMAIL –≤ localStorage ${key}: ${parsed.email}`);
                        }
                    } catch (e) {
                        // –ù–µ JSON
                    }
                }
            }
            
            // sessionStorage
            for (let i = 0; i < sessionStorage.length; i++) {
                const key = sessionStorage.key(i);
                if (key.toLowerCase().includes('collabza') ||
                    key.toLowerCase().includes('token') ||
                    key.toLowerCase().includes('session') ||
                    key.toLowerCase().includes('auth') ||
                    key.toLowerCase().includes('jwt') ||
                    key.toLowerCase().includes('access') ||
                    key.toLowerCase().includes('bearer')) {
                    
                    const value = sessionStorage.getItem(key);
                    log(`sessionStorage ${key}:`, value);
                    
                    try {
                        const parsed = JSON.parse(value);
                        log(`–ü–∞—Ä—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ${key}:`, parsed);
                        if (parsed.email) {
                            log(`–ù–ê–ô–î–ï–ù EMAIL –≤ sessionStorage ${key}: ${parsed.email}`);
                        }
                    } catch (e) {
                        // –ù–µ JSON
                    }
                }
            }
            
            // 4. –ü–û–ò–°–ö –¢–û–ö–ï–ù–û–í –í –ö–£–ö–ê–•
            log('=== –ü–û–ò–°–ö –¢–û–ö–ï–ù–û–í COLLABZA –í –ö–£–ö–ê–• ===');
            const cookies = document.cookie.split(';');
            cookies.forEach(cookie => {
                const [name, value] = cookie.trim().split('=');
                if (name.toLowerCase().includes('collabza') ||
                    name.toLowerCase().includes('token') ||
                    name.toLowerCase().includes('session') ||
                    name.toLowerCase().includes('auth') ||
                    name.toLowerCase().includes('jwt') ||
                    name.toLowerCase().includes('access') ||
                    name.toLowerCase().includes('bearer')) {
                    
                    try {
                        const decoded = decodeURIComponent(value || '');
                        log(`–ö—É–∫–∞ ${name}:`, decoded);
                        
                        try {
                            const parsed = JSON.parse(decoded);
                            log(`–ü–∞—Ä—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫—É–∫–∞ ${name}:`, parsed);
                            if (parsed.email) {
                                log(`–ù–ê–ô–î–ï–ù EMAIL –≤ –∫—É–∫–µ ${name}: ${parsed.email}`);
                            }
                        } catch (e) {
                            // –ù–µ JSON
                        }
                    } catch (e) {
                        log(`–û—à–∏–±–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∫—É–∫–∏ ${name}:`, e);
                    }
                }
            });
            
            // 5. –ü–û–ò–°–ö –°–ö–†–ò–ü–¢–û–í COLLABZA –ù–ê –°–¢–†–ê–ù–ò–¶–ï
            log('=== –ü–û–ò–°–ö –°–ö–†–ò–ü–¢–û–í COLLABZA –ù–ê –°–¢–†–ê–ù–ò–¶–ï ===');
            const scripts = document.querySelectorAll('script[src]');
            scripts.forEach((script, index) => {
                const src = script.src;
                if (src.toLowerCase().includes('collabza') ||
                    src.toLowerCase().includes('auth') ||
                    src.toLowerCase().includes('user') ||
                    src.toLowerCase().includes('session') ||
                    src.toLowerCase().includes('sdk')) {
                    log(`–ù–∞–π–¥–µ–Ω —Å–∫—Ä–∏–ø—Ç ${index}: ${src}`);
                }
            });
            
            log('=== –ö–û–ù–ï–¶ –ü–û–ò–°–ö–ê COLLABZA SDK ===');
            log('–í–ù–ò–ú–ê–ù–ò–ï: –ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ —Å "–ù–ê–ô–î–ï–ù EMAIL" –∏–ª–∏ "–ù–ê–ô–î–ï–ù SDK"');
            
            return null; // –ü–æ–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º null –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
        }

        function runCollabzaSearch() {
            clearLogs();
            log('üöÄ –ó–∞–ø—É—Å–∫ –ø–æ–∏—Å–∫–∞ Collabza SDK...');
            getTildaUserEmail();
        }

        // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', () => {
            setTimeout(runCollabzaSearch, 1000);
        });
    </script>
</body>
</html>